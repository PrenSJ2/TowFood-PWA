{% extends "layout.html" %}
{% block title %}
Stock In
{% endblock %}
{% block content %}
<!-- {% load tailwind_filters %} -->
<div class="flex flex-col space-y-10">
  <!-- Heading -->
  <div class="flex justify-center align-middle text-3xl font-bold pt-3 space-x-2">
    <h1>Towcester</h1>
    <div class="dropdown dropdown-end">
      <label tabindex="0" class="cursor-pointer"><i class="fa-solid fa-caret-down fa-sm pt-1"></i></label>
      <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
        <li class="active"><a>Towcester</a></li>
        <li><a>Roade</a></li>
      </ul>
    </div>
  </div>
  <!-- Content -->
  <div class="flex justify-center">
    <!-- Image Preview -->
    <div class="card bg-base-200 shadow-2xl w-96 flex justify-center">
      <div id="interactive" class="viewport">
          <canvas class="drawingBuffer w-96 absolute inset-0 z-20"></canvas>
          <video class="relative z-10 rounded-2xl" autoplay="true" preload="auto" src="" muted="true" playsinline="true"></video>
      </div>
    </div>
  </div>
  <!-- Info Cards -->
  <div class="">
    <div class="flex justify-center space-x-7">
      <div class="card bg-base-200 shadow-2xl w-96 flex flex-row justify-center items-center pb-4 px-2">
        <div class="form-control w-full max-w-xs">
          <label class="label">
            <span class="card-title">Barcode Lookup</span>
          </label>
          <form id="barcode_lookup" action="" onSubmit="test1()">
            <div class="flex flex-row items-center space-x-4">
              <input id="barcode_search" type="number" placeholder="Enter EAN"
                class="input input-bordered w-full max-w-xs" />
              <i class="fa-solid fa-magnifying-glass fa-lg cursor-pointer" onclick="BarcodeLookup()"></i>
              <!-- <i class="fa-solid fa-cart-plus fa-lg cursor-pointer" onclick="HTMLFormElement.prototype.submit.call($('#addProduct')[0])"></i> -->
            </div>
          </form>
          <form method="POST" action="/scan_in/">

            <div class="flex flex-col px-7 py-2 form-control">
              {% csrf_token %}
              {{ form|crispy }}
              <!-- <label class="label">
                  <span class="label-text-alt">Brand</span>
                </label>
                <input id="id_brand" type="text" placeholder="Enter Brand" class="input input-ghost w-full max-w-xs" />
                <label class="label">
                  <span class="label-text-alt">Product name</span>
                </label>
                <input id="id_name" type="text" placeholder="Enter Name" class="input input-ghost w-full max-w-xs" />
                <label class="label">
                  <span class="label-text-alt">Weight in grams</span>
                </label>
                <input id="id_weight" type="number" placeholder="Enter Weight (g)" class="input input-ghost w-full max-w-xs" />   
                <label class="label">
                  <span class="label-text-alt">Category</span>
                </label>
                <input id="id_category" type="text" placeholder="Enter Category" class="input input-ghost w-full max-w-xs" />
                <label class="label">
                  <span class="label-text-alt">Allergens</span>
                </label>
                <input id="id_allergens" type="text" placeholder="Enter Allergens separated by a comma" class="input input-ghost w-full max-w-xs" />
                <label class="label">
                  <span class="label-text-alt">Perishable ?</span>
                </label>
                <input type="checkbox" class="ml-4 checkbox checkbox-xs input-ghost" />  -->
              <button type="submit" value="submit" class="btn btn-primary mt-4">Add to Cart
                <i class="fa-solid fa-cart-plus cursor-pointer pl-2"></i>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <!-- Stock Info Cards -->
  <div class="flex justify-center space-x-7">
    <div class="card overflow-x-auto bg-base-200 shadow-2xl w-96 pb-4">
      <table class="table table-compact w-full px-4">
        <thead>
          <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Perishable</th>
            <th>Weight</th>
            <th>EAN</th>
          </tr>
        </thead>
        <tbody>
          {% for x in product_qs_today %}
          <tr>
            <th>{{ x.name }}</th>
            <td>{{ x.brand }}</td>
            <td>{{ x.category_list.0 }},{{ x.category_list.1 }}</td>
            <td>{{ x.perishable }}</td>
            <td>{{ x.weight }}g</td>
            <td>{{ x.footprint }}per kg</td>
            <td>{{ x.barcode }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>


  <!-- Bottom Nav -->
  <div class="btm-nav bg-base-200">
    <button class="active">
      <i class="fa-solid fa-house"></i>
    </button>
    <button>
      <i class="fa-solid fa-cart-shopping"></i>
    </button>
    <button>
      <i class="fa-solid fa-users"></i>
    </button>
    <button>
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>
  {% endblock %}